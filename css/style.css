/* ========= Reset & Base ========= */
*, *::before, *::after { box-sizing: border-box; }
html, body { margin: 0; padding: 0; }
img, svg, video, canvas { display: block; max-width: 100%; }
a { color: inherit; text-decoration: none; }
button { font: inherit; cursor: pointer; }
:root {
  /* 컬러 토큰 (기본값; JS가 config로 덮어씀) */
  --color-primary: #2f6d2f;
  --color-on-primary: #ffffff;
  --color-bg: #ffffff;
  --color-surface: #f7f8f9;
  --color-text: #1a1a1a;
  --color-muted: #6b7280;

  /* 타이포 & 레이아웃 토큰 */
  --font-family: ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Noto Sans KR", "Apple SD Gothic Neo", sans-serif;
  --radius-lg: 16px;
  --shadow-md: 0 6px 24px rgba(0,0,0,0.08);
  --container-max: 1120px;

  /* 간격 스케일 (base × 배수) */
  --space-base: 8px;
  --s1: calc(var(--space-base) * 1);
  --s2: calc(var(--space-base) * 2);
  --s3: calc(var(--space-base) * 3);
  --s4: calc(var(--space-base) * 4);
  --s6: calc(var(--space-base) * 6);
  --s8: calc(var(--space-base) * 8);
  --s12: calc(var(--space-base) * 12);

  /* 모션 토큰 (JS로 덮어씀) */
  --motion-duration: 600ms;
  --motion-ease: cubic-bezier(0.22,1,0.36,1);
  --reveal-distance: 24px;
  --stagger: 80ms;
}
body {
  background: var(--color-bg);
  color: var(--color-text);
  font-family: var(--font-family);
  line-height: 1.6;
  -webkit-font-smoothing: antialiased;
  text-rendering: optimizeLegibility;
}
.container { width: 100%; max-width: var(--container-max); margin-inline: auto; padding: 0 var(--s2); }
.skip-link {
  position:absolute; left:-9999px; top:auto; width:1px; height:1px; overflow:hidden;
}
.skip-link:focus { position:static; width:auto; height:auto; padding:8px; background:#000; color:#fff; }

/* ========= Header / Nav ========= */
.site-header {
  position: sticky; top: 0; z-index: 50; backdrop-filter: saturate(180%) blur(8px);
  background: color-mix(in srgb, var(--color-bg) 85%, transparent);
  border-bottom: 1px solid rgba(0,0,0,0.06);
}
.header-inner { display: flex; align-items: center; gap: var(--s2); height: 64px; }
.brand { display: inline-flex; align-items: center; gap: var(--s1); font-weight: 700; }
.brand img { width: 28px; height: 28px; }
.site-nav ul { display: flex; gap: var(--s3); list-style: none; margin: 0; padding: 0; }
.site-nav a { opacity: 0.85; }
.site-nav a:hover, .site-nav a:focus { opacity: 1; }
.nav-toggle { display: none; background: none; border: 0; font-size: 24px; padding: 8px; }
@media (max-width: 880px) {
  .nav-toggle { display: inline-flex; margin-left: auto; }
  .site-nav { position: absolute; left: 0; right: 0; top: 64px; background: var(--color-bg); border-bottom: 1px solid rgba(0,0,0,0.06); display: none; }
  .site-nav.open { display: block; }
  .site-nav ul { flex-direction: column; padding: var(--s2); gap: var(--s2); }
}

/* ========= Hero ========= */
.hero { position: relative; min-height: 72vh; display: grid; place-items: center; }
.hero-bg {
  position:absolute; inset:0;
  background-image: var(--hero-bg-url, url("../images/hero_background_placeholder.jpg"));
  background-size: cover; background-position: center;
  filter: saturate(105%) contrast(105%);
}
.hero::before {
  content:""; position:absolute; inset:0;
  background: linear-gradient(180deg, color-mix(in srgb, var(--color-bg) 15%, transparent), color-mix(in srgb, #000 55%, transparent));
}
.hero-inner { position: relative; text-align: center; color: #fff; padding: var(--s8) 0; }
.hero-inner h1 { font-size: clamp(28px, 5vw, 48px); line-height: 1.15; margin-bottom: var(--s2); }
.hero-inner p { font-size: clamp(16px, 2.5vw, 20px); opacity: 0.95; margin-bottom: var(--s4); }
.partner-row { margin-top: var(--s4); display:flex; gap: var(--s3); justify-content:center; align-items:center; flex-wrap: wrap; }
.partner-row img { height: 28px; opacity: 0.8; filter: grayscale(100%); }

/* ========= Sections ========= */
.section { padding: var(--s8) 0; }
.section.muted { background: var(--color-surface); }
.section-intro { color: var(--color-muted); }
.grid-2 { display: grid; grid-template-columns: 1.1fr 0.9fr; gap: var(--s6); align-items: center; }
@media (max-width: 960px) { .grid-2 { grid-template-columns: 1fr; } }
.media img { border-radius: var(--radius-lg); box-shadow: var(--shadow-md); }

/* ========= Cards ========= */
.card-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: var(--s4); }
@media (max-width: 1100px) { .card-grid { grid-template-columns: repeat(2, 1fr); } }
@media (max-width: 680px)  { .card-grid { grid-template-columns: 1fr; } }
.card {
  background: var(--color-bg);
  border-radius: var(--radius-lg);
  box-shadow: var(--shadow-md);
  overflow: hidden;
  display: flex; flex-direction: column;
}
.card .card-media img { width: 100%; aspect-ratio: 4/3; object-fit: cover; }
.card .card-body { padding: var(--s3); display: grid; gap: var(--s2); }
.card h3 { margin: 0; font-size: 20px; }
.card p { margin: 0; color: var(--color-muted); }
.card .card-actions { margin-top: auto; padding-top: var(--s2); }

/* ========= Checklist ========= */
.checklist { list-style: none; padding: 0; margin: var(--s3) 0 0; display: grid; gap: var(--s1); }
.checklist li::before { content:"✓"; margin-right: 8px; color: var(--color-primary); }

/* ========= Process Steps ========= */
.step-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: var(--s4); }
@media (max-width: 960px) { .step-grid { grid-template-columns: 1fr; } }
.step {
  background: var(--color-bg); border-radius: var(--radius-lg); box-shadow: var(--shadow-md);
  padding: var(--s3);
}
.step h3 { margin-top: 0; }

/* ========= FAQ ========= */
.faq-list { display: grid; gap: var(--s2); }
.faq-list details {
  background: var(--color-bg); border-radius: var(--radius-lg); box-shadow: var(--shadow-md);
  padding: var(--s2) var(--s3);
}

/* ========= Buttons ========= */
.btn {
  display: inline-flex; align-items: center; justify-content: center; gap: 8px;
  padding: 12px 18px; border-radius: 999px; font-weight: 700;
  transition: transform .12s ease, box-shadow .12s ease, opacity .12s ease;
  will-change: transform;
}
.btn-primary { background: var(--color-primary); color: var(--color-on-primary); }
.btn:hover { transform: translateY(-1px); }

/* ========= Footer ========= */
.site-footer { padding: var(--s4) 0; border-top: 1px solid rgba(0,0,0,0.06); background: var(--color-surface); }
.footer-inner { display:flex; justify-content: space-between; align-items:center; gap: var(--s2); flex-wrap: wrap; }
.footer-links a { opacity: .85; margin-left: var(--s2); }
.footer-links a:hover { opacity: 1; }

/* ========= Dialog (Legal) ========= */
.legal-dialog { max-width: min(720px, 92vw); border: none; border-radius: var(--radius-lg); padding: 0; }
.legal-dialog::backdrop { background: rgba(0,0,0,0.35); }
.legal-dialog article { padding: var(--s3) var(--s3) var(--s3); }
.legal-dialog header h3 { margin: 0 0 var(--s2); }
.legal-dialog button { padding: 10px 14px; border: 0; border-radius: 8px; background: var(--color-primary); color: var(--color-on-primary); }

/* ========= Kakao Roughmap Responsive ========= */
.map-embed { width: 100%; position: relative; }
.map-embed[data-responsive="true"] { aspect-ratio: var(--map-aspect, 16/9); min-height: 240px; } /* 높이 가드 */
.map-embed[data-responsive="true"] > .root_daum_roughmap {
  position: absolute; inset: 0;
  width: 100% !important; height: 100% !important;
}
/* 지도 카드 스타일(둥근모서리+클리핑) */
.media .map-embed {
  border-radius: var(--radius-lg);
  box-shadow: var(--shadow-md);
  overflow: hidden;
}
/* 내부 요소까지 100%로 강제(퍼가기 고정 px 무력화) */
.map-embed .root_daum_roughmap,
.map-embed .root_daum_roughmap * { box-sizing: border-box; }
.map-embed .root_daum_roughmap,
.map-embed .root_daum_roughmap iframe,
.map-embed .root_daum_roughmap .wrap_map,
.map-embed .root_daum_roughmap .map_container {
  width: 100% !important;
  height: 100% !important;
}
/* aspect-ratio 미지원 브라우저 폴백 */
@supports not (aspect-ratio: 1/1) {
  .map-embed[data-responsive="true"] { padding-top: 56.25%; min-height: 0; } /* 16:9 */
  .map-embed[data-responsive="true"] > .root_daum_roughmap { position: absolute; inset: 0; }
}

/* ========= Auto Pruning Helpers ========= */
.hidden { display: none !important; }
.section.is-first { padding-top: var(--s6); }
.section.is-last  { padding-bottom: var(--s8); }
.container.one-col { display: block; }
.container.one-col .grid-2 { display: block; }
.partner-row:empty { display: none; }

/* ========= Professional Motion ========= */
/* Scroll Reveal */
.reveal {
  opacity: 0;
  transform: translateY(var(--reveal-distance));
  transition:
    opacity var(--motion-duration) var(--motion-ease),
    transform var(--motion-duration) var(--motion-ease);
  transition-delay: calc(var(--i, 0) * var(--stagger));
  will-change: transform, opacity;
}
.reveal.is-in { opacity: 1; transform: none; }

/* Hero Ken Burns (root에 .anim-hero-kenburns가 있을 때만) */
.anim-hero-kenburns .hero-bg {
  animation: kenburns 16s ease-in-out both infinite alternate;
}
@keyframes kenburns {
  0%   { transform: scale(1) translate3d(0, 0, 0); }
  100% { transform: scale(1.07) translate3d(0, -1.5%, 0); }
}

/* Nav underline */
.anim-nav .site-nav a { position: relative; }
.anim-nav .site-nav a::after {
  content: "";
  position: absolute; left: 0; bottom: -6px;
  width: 100%; height: 2px; background: var(--color-primary);
  transform: scaleX(0); transform-origin: left center;
  transition: transform 220ms var(--motion-ease);
}
.anim-nav .site-nav a:hover::after,
.anim-nav .site-nav a:focus::after { transform: scaleX(1); }

/* Card hover lift */
.anim-card .card { transition: transform 160ms ease, box-shadow 160ms ease; }
.anim-card .card:hover, .anim-card .card:focus-within {
  transform: translateY(-2px);
  box-shadow: 0 10px 30px rgba(0,0,0,0.10);
}

/* Prefers-reduced-motion */
@media (prefers-reduced-motion: reduce) {
  * { animation: none !important; transition: none !important; }
  .reveal { opacity: 1 !important; transform: none !important; }
}
